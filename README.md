# Building-LAN
## Этот проект представляет собой пример создания локальной вычислительной сети (LAN) с использованием *Cisco Packet Tracer*. В проекте реализована настройка различных сетевых устройств, таких как маршрутизаторы, коммутаторы и конечные устройства, для создания функциональной сети, которая обеспечивает связь между различными сегментами.

### Введение
Целью данного проекта является разработка комплексного проекта корпоративной локальной вычислительной сети, обеспечивающей эффективное взаимодействие между структурными подразделениями предприятия.

Задачами данного проекта являются:
* обеспечение возможности информационного взаимодействия между АРМ, серверами, средствами сетевой печати и т.п. со скоростью передачи данных не менее 1 Гбит/с, а также доступа сотрудников к сети Internet;
* обеспечение универсальности администрирования;
* предусмотреть подключение к ЛВС мобильных пользователей;
* режим функционирования ЛВС — круглосуточно, 365 дней в году.

В проекте должны быть разобраны следующие вопросы:
* составить схему топологии корпоративной сети;
* разобрать физическую и логическую схемы сети;
* определить необходимое оборудование (коммутаторы, маршрутизаторы, устройства беспроводной связи). Подобрать конкретные модели оборудования, обосновывая свой выбор;
* настроить оборудование и протестировать работоспособность сети в симуляторе Cisco Packet Tracer;
* рассчитать получившуюся стоимость оборудования;
* разработать рекомендации по защите сети (отказоустойчивость, защита от НСД и т.д.).

___

### Теоретическая часть.
Объект – Коммерческая энергосбытовая компания, занимающая одноэтажное здание.
![Общий план здания](https://github.com/Varsto04/Building-LAN/blob/main/%D0%9E%D0%B1%D1%89%D0%B8%D0%B9_%D0%BF%D0%BB%D0%B0%D0%BD.png)

В основу построения ЛВС заложены следующие принципы:
* Безопасность;
* Универсальность;
* Масштабируемость;
* Надежность;
* Долговечность;
* Эргономичность;
* Эстетичность;
* Экономичность.

Выбор технологии, архитектуры и активного сетевого оборудования для ЛВС определяется следующими факторами:
* Размер сети и количество пользователей;
* Необходимость обеспечения доступа пользователей ко всем разрешенным сетевым и информационным ресурсам;
* Необходимость разделения пользователей на рабочие группы с применением виртуальных сетей;
* Обеспечение гарантированных высокоскоростных соединений для серверов и рабочих станций вне зависимости от загруженности отдельных сегментов и сетевого оборудования;
* Возможность увеличения количества рабочих станций и серверов и наращивания сети без нарушения ее функционирования;
* Минимизация номенклатуры применяемого оборудования для снижения расходов на администрирование;
* Поддержка качества предоставления услуг;
* Управление уровнем обслуживания.

___

### Практическая часть. Проектирование ЛВС
Исходя из структуры объекта, одним из наиболее эффективных решений является выбор *древовидной топологии*, которая представляет собой иерархическую структуру, организующую устройства в виде дерева с центральными узлами, которые соединяют отдельные сегменты сети.

Основным сетевым протоколом, поддерживающим транспорт в ЛВС, является протокол IP. В качестве протоколов третьего и четвертого уровня модели OSI применяется стек протоколов TCP/IP версии 4. План IP-адресации соответствует RFC 1918 и учитывает существующие планы IP-адресации в смежных внешних системах, а также рост количества сетевых устройств на 30%.

Подсистема уровня ядра ЛВС состоит из двух маршрутизаторов *«Mikrotik hEX S»*, у которых есть следующие необходимые характеристики:
* 5 портов WAN/LAN, со скоростью 1 Гбит/с;
* поддержка NAT;
* поддержка протоколов BGP и OSPF;
* поддержка VPN подключения (IPSec).

Подсистема уровня распределения ЛВС состоит из четырех коммутаторов третьего уровня (L3) модели OSI *«MikroTik CRS112-8P-4S-IN»*, у которых есть следующие необходимые характеристики:
* 8 медных портов (RJ-45), со скоростью 1 Гбит/с;
* 4 SFP-порта, со скоростью 1 Гбит/с;
* поддержка функции VLAN;
* поддержка фильтрации пакетов по IP (ACL);
* обнаружение петель в структуре сети.

Подсистема уровня досутпа ЛВС состоит из четырнадцати коммутаторов второго уровня (L2) модели OSI «MikroTik CSS326-24G-2S+RM», у которых есть следующие необходимые характеристики:
* 24 медных порта (RJ-45), со скоростью 1 Гбит/с;
* 2 SFP-порта, со скоростью 10 Гбит/с;
* поддержка функции VLAN.

ЛВС также включает в себя точки доступа с беспроводной передачей данных по WiFi. Для этого нужно двенадцать устройство *«MikroTik wsAP ac lite»*. Подключение точек доступа производится через коммутаторы уровня доступа.

Общая стоимость оборудования составит *659 568* рублей, без учета стоимости серверов и ПК.

ЛВС обеспечивает обмен данными со следующей пропускной способностью:
* между устройствами подсистемы уровня доступа и устройствами конечных пользователей – не менее 1 Гбит/с.
* между устройствами подсистем уровня доступа и уровнем распределения - не менее 1 Гбит/с для каждого канала связи.
* между уровнем распределения и уровнем ядра локальной сети - не менее 1 Гбит/с для каждого канала связи.
* между ядром локальной сети и ядром провайдер - не менее 1 Гбит/с для каждого канала связи.
       
Для обеспечения отказоустойчивости и высокой доступности в ЛВС на уровне ядра используются два маршрутизатора, которые подключены к двум разным провайдерам (внешней сети). На уровне распределения используются также дублирующие коммутаторы третьего уровня, которые подключены к разным маршрутизаторам.

![Логическое представление](https://github.com/Varsto04/Building-LAN/blob/main/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5.png)

Маршрутизаторы работают следующим образом:
* Один из маршрутизаторов постоянно мониторит состояние подключения к основному провайдеру.
* Если маршрутизатор обнаруживает, что основной провайдер недоступен, он начинает процесс переключения на резервного провайдера, куда и будет перенаправляться весь трафик.
* Когда маршрутизатор обнаруживает восстановление связи с основным провайдером, он снова перенаправляет трафик обратно.

___

### Практическая часть. Разделение на виртуальные сети
Список созданных VLAN: 
| № | Название VLAN | Название отдела/назначение |
|-------------|-------------|-------------|
| 1 | VLAN 1 | Руководство, канцелярия |
| 2 | VLAN 2 | Служба безопасности |
| 3 | VLAN 3 | Бухгалтерия |
| 4 | VLAN 4 | Финансово-аналитическая группа |
| 5 | VLAN 5 | Отдел маркетинга |
| 6 | VLAN 6 | Служба по работе с клиентами |
| 7 | VLAN 7 | Служба автоматизации (IT) |
| 8 | VLAN 8 | Служба главного энергетика |
| 9 | VLAN 9 | Группа по ОТ и ТБ |
| 10 | VLAN 10 | Отдел кадров и договорно-правовой работы, Отдел кадров и ДП работы |
| 11 | VLAN 11 | Техническая служба |
| 12 | VLAN 12 | Кладовщик |
| 13 | VLAN 13 | Серверная |

Выделенные ip-адреса для VLAN:
| № VLAN | Описание подсети | Адрес подсети | Диапазон адресов | Хостов |
|-------------|-------------|-------------|-------------|-------------|
| VLAN1 | Руководство, канцелярия (11 устройств) | 192.168.1.32/27 | 192.168.1.32 - 192.168.1.63 | 30 |
| VLAN7 | Служба автоматизации (IT) (7 устройств) | 192.168.1.16/28 | 192.168.1.16 - 192.168.1.31 | 14 |
| VLAN13 | Серверная (5 устройств) | 192.168.1.96/28 | 192.168.1.96 - 192.168.1.111 | 14 |
| VLAN2 | Служба безопасности (12 устройств) | 192.168.1.64/27 | 192.168.1.64 - 192.168.1.95 | 30 |
| VLAN11 | Техническая служба (6 устройств) | 192.168.1.112/28 | 192.168.1.112 - 192.168.1.127 | 14 |
| VLAN6 | Служба по работе с клиентами (7 устройств) | 192.168.2.16/28 | 192.168.2.16 - 192.168.2.31 | 14 |
| VLAN5 | Отдел маркетинга (13 устройств) | 192.168.2.32/27 | 192.168.2.32 - 192.168.2.63 | 30 |
| VLAN3 | Бухгалтерия (10 устройств) | 192.168.2.64/27 | 192.168.2.64 - 192.168.2.95 | 30 |
| VLAN4 | Финансово-аналитическая группа (11 устройств) | 192.168.2.96/27 | 192.168.2.96 - 192.168.2.127 | 30 |
| VLAN8 | Служба главного энергетика (8 устройств) | 192.168.2.128/27 | 192.168.2.128 - 192.168.2.159 | 30 |
| VLAN10 | Отдел кадров и договорно-правовой работы, Отдел кадров и ДП работы (5 устройств) | 192.168.2.160/28 | 192.168.2.160 - 192.168.2.175 | 14 |
| VLAN9 | Группа по ОТ и ТБ (4 устройства) | 192.168.2.176/28 | 192.168.2.176 - 192.168.2.191 | 14 |
| VLAN12 | Кладовщик (2 устройства) | 192.168.2.192/28 | 192.168.2.192 - 192.168.2.207 | 14 |

___

### Практическая часть. Настройка маршрутизации
В качестве внутридоменной маршрутизации был выбран и настроен протокол OSPF. Пример его настройки на одном из коммутаторов третьего уровня:
```
(config)#router ospf 10
(config-router)#router-id 1.1.1.1
(config-router)#network 192.168.1.32 0.0.0.31 area 0
(config-router)#network 192.168.1.16 0.0.0.15 area 0
(config-router)#network 192.168.1.96 0.0.0.15 area 0
(config-router)#network 192.168.1.64 0.0.0.31 area 0
(config-router)#network 192.168.1.112 0.0.0.15 area 0
(config-router)#network 192.168.1.0 0.0.0.3 area 0
```
Пример настройки на одном из маршрутизаторов:
```
(config)#router ospf 10
(config-router)#router-id 3.3.3.3
(config-router)#network 192.168.1.0 0.0.0.3 area 0
(config-router)#network 192.168.2.0 0.0.0.3 area 0
(config-router)#network 192.168.1.248 0.0.0.3 area 0
```
Была настроена технология NAT, которая используется для изменения исходных или целевых IP-адресов в заголовках пакетов данных при их передаче через маршрутизатор. Пример настройки NAT на одном из маршрутизаторов:
```
(config)#ip nat inside source list 1 int serial0/3/0 overload
(config)#access-list 1 permit 192.168.1.32 0.0.0.31
(config)#access-list 1 permit 192.168.1.16 0.0.0.15
(config)#access-list 1 permit 192.168.1.96 0.0.0.15
(config)#access-list 1 permit 192.168.1.64 0.0.0.31
(config)#access-list 1 permit 192.168.1.112 0.0.0.15
(config)#access-list 1 permit 192.168.2.16 0.0.0.15
(config)#access-list 1 permit 192.168.2.32 0.0.0.31
(config)#access-list 1 permit 192.168.2.64 0.0.0.31
(config)#access-list 1 permit 192.168.2.96 0.0.0.31
(config)#access-list 1 permit 192.168.2.128 0.0.0.31
(config)#access-list 1 permit 192.168.2.160 0.0.0.15
(config)#access-list 1 permit 192.168.2.176 0.0.0.15
(config)#access-list 1 permit 192.168.2.192 0.0.0.15
```
Интерфейс, который подключен в внешней сети (провайдеру), был определен как внешний для NAT: «ip nat outside», а все остальные интерфейсы — как внутренние: «ip nat inside».

В качестве междоменной маршрутизации был выбран и настроен протокол BGP. Пример его настройки на на одном из маршрутизаторов:
```
(config)# router bgp 65001
(config-router)# neighbor 84.53.216.230 remote-as 65002
(config-router)# network 84.53.216.228 mask 0.0.0.3
```

Для автоматического получения ip-адресов конечным устройства был настроен протокол DHCP. Для этого был установлен отдельный сервер, на котором настроены все необходимые пулы адресов. Всем серверам были выданы статические ip-адреса. Для передачи DHCP-запросов от пользователей был настроен также DHCP-relay на коммутаторах третьего уровня, который перенаправляет пакеты на сервер. Пример настройки DHCP-relay:
```
(config)#int vlan 20
(config-if)#ip helper-address 192.168.1.98
```

___

### Практическая часть. Дополнительные настройки
К полученной схеме ЛВС был подключен компьютер при помощи Remote Access VPN. Для этого на маршрутизаторе была настроена система аутентификации для пользователей, которые будут подключаться к сети. Первое, что необходимо сделать, это настроить пул ip-адресов, которые будут выдаваться удаленным пользователем. Далее была настроена аутентификация пользователей через локальную базу данных на устройстве. Затем был построен VPN-туннель, который использует протокол IPSec. После всех настроек, можно подключать удаленных пользователей через VPN.
